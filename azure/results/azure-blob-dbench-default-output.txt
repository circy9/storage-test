========================
Wed 26 May 2021 08:37:28 PM PDT
========================
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: dbench-pvc
spec:
  storageClassName: blob
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 10Gi
---
apiVersion: batch/v1
kind: Job
metadata:
  name: dbench-job
spec:
  template:
    spec:
      containers:
      - name: dbench
        image: fbuchmeier/dbench
        imagePullPolicy: Always
        env:
          - name: DBENCH_MOUNTPOINT
            value: /data
          # - name: DBENCH_QUICK
          #   value: "yes"
          # - name: FIO_SIZE
          #   value: 1G
          # - name: FIO_OFFSET_INCREMENT
          #   value: 256M
          # - name: FIO_DIRECT
          #   value: "0"
        volumeMounts:
        - name: dbench-pv
          mountPath: /data
      restartPolicy: Never
      volumes:
      - name: dbench-pv
        persistentVolumeClaim:
          claimName: dbench-pvc
  backoffLimit: 4
NAME                   READY   STATUS   RESTARTS   AGE
pod/dbench-job-5mgf5   0/1     Error    0          10m
pod/dbench-job-b7wvx   0/1     Error    0          8m6s
pod/dbench-job-bfv56   0/1     Error    0          9m16s
pod/dbench-job-k9zbf   0/1     Error    0          9m6s
pod/dbench-job-rddsq   0/1     Error    0          8m46s

NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.0.0.1     <none>        443/TCP   23h

NAME                   COMPLETIONS   DURATION   AGE
job.batch/dbench-job   0/1           10m        10m
NAME         STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
dbench-pvc   Bound    pvc-82a2f0f9-5f5d-4d04-bdf6-762b8797613c   10Gi       RWX            blob           10m
Name:         dbench-job-5mgf5
Namespace:    default
Priority:     0
Node:         aks-nodepool1-35828301-vmss000002/10.240.0.6
Start Time:   Wed, 26 May 2021 20:27:29 -0700
Labels:       controller-uid=12d48e8f-1293-4f8b-b084-cc287528d858
              job-name=dbench-job
Annotations:  <none>
Status:       Failed
IP:           10.244.2.24
IPs:
  IP:           10.244.2.24
Controlled By:  Job/dbench-job
Containers:
  dbench:
    Container ID:   containerd://1e5a56384527360292f262a9aee44a7d2b81f59831d4ecb66687c9d2334a4046
    Image:          fbuchmeier/dbench
    Image ID:       docker.io/fbuchmeier/dbench@sha256:a6a84bc6e42a4f7f56c970fe0ef136168b4e5e3565ec4645ea959d30f2d284b1
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 26 May 2021 20:27:31 -0700
      Finished:     Wed, 26 May 2021 20:28:14 -0700
    Ready:          False
    Restart Count:  0
    Environment:
      DBENCH_MOUNTPOINT:  /data
    Mounts:
      /data from dbench-pv (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w7jcv (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  dbench-pv:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  dbench-pvc
    ReadOnly:   false
  default-token-w7jcv:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-w7jcv
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason            Age    From               Message
  ----     ------            ----   ----               -------
  Warning  FailedScheduling  10m    default-scheduler  0/3 nodes are available: 3 pod has unbound immediate PersistentVolumeClaims.
  Normal   Scheduled         10m    default-scheduler  Successfully assigned default/dbench-job-5mgf5 to aks-nodepool1-35828301-vmss000002
  Normal   Pulling           9m59s  kubelet            Pulling image "fbuchmeier/dbench"
  Normal   Pulled            9m58s  kubelet            Successfully pulled image "fbuchmeier/dbench" in 786.871456ms
  Normal   Created           9m58s  kubelet            Created container dbench
  Normal   Started           9m58s  kubelet            Started container dbench


Name:         dbench-job-b7wvx
Namespace:    default
Priority:     0
Node:         aks-nodepool1-35828301-vmss000002/10.240.0.6
Start Time:   Wed, 26 May 2021 20:29:24 -0700
Labels:       controller-uid=12d48e8f-1293-4f8b-b084-cc287528d858
              job-name=dbench-job
Annotations:  <none>
Status:       Failed
IP:           10.244.2.28
IPs:
  IP:           10.244.2.28
Controlled By:  Job/dbench-job
Containers:
  dbench:
    Container ID:   containerd://1ef4fdba6e514efde8c5101473b5cea177fe7e658c1a9e0f9f01f5db17b98094
    Image:          fbuchmeier/dbench
    Image ID:       docker.io/fbuchmeier/dbench@sha256:a6a84bc6e42a4f7f56c970fe0ef136168b4e5e3565ec4645ea959d30f2d284b1
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 26 May 2021 20:29:26 -0700
      Finished:     Wed, 26 May 2021 20:29:38 -0700
    Ready:          False
    Restart Count:  0
    Environment:
      DBENCH_MOUNTPOINT:  /data
    Mounts:
      /data from dbench-pv (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w7jcv (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  dbench-pv:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  dbench-pvc
    ReadOnly:   false
  default-token-w7jcv:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-w7jcv
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  8m5s  default-scheduler  Successfully assigned default/dbench-job-b7wvx to aks-nodepool1-35828301-vmss000002
  Normal  Pulling    8m4s  kubelet            Pulling image "fbuchmeier/dbench"
  Normal  Pulled     8m3s  kubelet            Successfully pulled image "fbuchmeier/dbench" in 730.656168ms
  Normal  Created    8m3s  kubelet            Created container dbench
  Normal  Started    8m3s  kubelet            Started container dbench


Name:         dbench-job-bfv56
Namespace:    default
Priority:     0
Node:         aks-nodepool1-35828301-vmss000002/10.240.0.6
Start Time:   Wed, 26 May 2021 20:28:14 -0700
Labels:       controller-uid=12d48e8f-1293-4f8b-b084-cc287528d858
              job-name=dbench-job
Annotations:  <none>
Status:       Failed
IP:           10.244.2.25
IPs:
  IP:           10.244.2.25
Controlled By:  Job/dbench-job
Containers:
  dbench:
    Container ID:   containerd://88dd527450d868b3e7e38339fde0475c6617ad09b625356651be344d4fd566ba
    Image:          fbuchmeier/dbench
    Image ID:       docker.io/fbuchmeier/dbench@sha256:a6a84bc6e42a4f7f56c970fe0ef136168b4e5e3565ec4645ea959d30f2d284b1
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 26 May 2021 20:28:16 -0700
      Finished:     Wed, 26 May 2021 20:28:16 -0700
    Ready:          False
    Restart Count:  0
    Environment:
      DBENCH_MOUNTPOINT:  /data
    Mounts:
      /data from dbench-pv (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w7jcv (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  dbench-pv:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  dbench-pvc
    ReadOnly:   false
  default-token-w7jcv:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-w7jcv
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  9m16s  default-scheduler  Successfully assigned default/dbench-job-bfv56 to aks-nodepool1-35828301-vmss000002
  Normal  Pulling    9m15s  kubelet            Pulling image "fbuchmeier/dbench"
  Normal  Pulled     9m14s  kubelet            Successfully pulled image "fbuchmeier/dbench" in 755.467752ms
  Normal  Created    9m14s  kubelet            Created container dbench
  Normal  Started    9m14s  kubelet            Started container dbench


Name:         dbench-job-k9zbf
Namespace:    default
Priority:     0
Node:         aks-nodepool1-35828301-vmss000002/10.240.0.6
Start Time:   Wed, 26 May 2021 20:28:24 -0700
Labels:       controller-uid=12d48e8f-1293-4f8b-b084-cc287528d858
              job-name=dbench-job
Annotations:  <none>
Status:       Failed
IP:           10.244.2.26
IPs:
  IP:           10.244.2.26
Controlled By:  Job/dbench-job
Containers:
  dbench:
    Container ID:   containerd://cba47dbebb0db307800f3426d5d559398e23c50c5bd64de680fe1e250afe02f6
    Image:          fbuchmeier/dbench
    Image ID:       docker.io/fbuchmeier/dbench@sha256:a6a84bc6e42a4f7f56c970fe0ef136168b4e5e3565ec4645ea959d30f2d284b1
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 26 May 2021 20:28:26 -0700
      Finished:     Wed, 26 May 2021 20:28:34 -0700
    Ready:          False
    Restart Count:  0
    Environment:
      DBENCH_MOUNTPOINT:  /data
    Mounts:
      /data from dbench-pv (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w7jcv (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  dbench-pv:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  dbench-pvc
    ReadOnly:   false
  default-token-w7jcv:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-w7jcv
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age   From               Message
  ----    ------     ----  ----               -------
  Normal  Scheduled  9m6s  default-scheduler  Successfully assigned default/dbench-job-k9zbf to aks-nodepool1-35828301-vmss000002
  Normal  Pulling    9m5s  kubelet            Pulling image "fbuchmeier/dbench"
  Normal  Pulled     9m4s  kubelet            Successfully pulled image "fbuchmeier/dbench" in 762.702448ms
  Normal  Created    9m4s  kubelet            Created container dbench
  Normal  Started    9m4s  kubelet            Started container dbench


Name:         dbench-job-rddsq
Namespace:    default
Priority:     0
Node:         aks-nodepool1-35828301-vmss000002/10.240.0.6
Start Time:   Wed, 26 May 2021 20:28:44 -0700
Labels:       controller-uid=12d48e8f-1293-4f8b-b084-cc287528d858
              job-name=dbench-job
Annotations:  <none>
Status:       Failed
IP:           10.244.2.27
IPs:
  IP:           10.244.2.27
Controlled By:  Job/dbench-job
Containers:
  dbench:
    Container ID:   containerd://3a139d110a93a880483d6b8ac1cf126d264726d66586d8ce7491da05ce70b833
    Image:          fbuchmeier/dbench
    Image ID:       docker.io/fbuchmeier/dbench@sha256:a6a84bc6e42a4f7f56c970fe0ef136168b4e5e3565ec4645ea959d30f2d284b1
    Port:           <none>
    Host Port:      <none>
    State:          Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Wed, 26 May 2021 20:28:46 -0700
      Finished:     Wed, 26 May 2021 20:28:59 -0700
    Ready:          False
    Restart Count:  0
    Environment:
      DBENCH_MOUNTPOINT:  /data
    Mounts:
      /data from dbench-pv (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-w7jcv (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  dbench-pv:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  dbench-pvc
    ReadOnly:   false
  default-token-w7jcv:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default-token-w7jcv
    Optional:    false
QoS Class:       BestEffort
Node-Selectors:  <none>
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  8m46s  default-scheduler  Successfully assigned default/dbench-job-rddsq to aks-nodepool1-35828301-vmss000002
  Normal  Pulling    8m45s  kubelet            Pulling image "fbuchmeier/dbench"
  Normal  Pulled     8m44s  kubelet            Successfully pulled image "fbuchmeier/dbench" in 725.687209ms
  Normal  Created    8m44s  kubelet            Created container dbench
  Normal  Started    8m44s  kubelet            Started container dbench
Working dir: /data

Testing Read IOPS...
fio: posix_fallocate fails: Not supported
fio: io_u error on file /data/fiotest: Invalid argument: read offset=1895448576, buflen=4096
fio: io_u error on file /data/fiotest: Invalid argument: read offset=1764708352, buflen=4096
